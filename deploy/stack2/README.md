Stack 2 - Docker Compose topology + nginx reverse proxy using uWSGI
===================================================================

This stack showcases an implementation of the RESTful API server running as
uWSGI server in a Docker Compose topology with an nginx reverse proxy.

Project Structure
-----------------

### Root folder

Folders:

* `revproxy` - Basic nginx configuration

Files:

* `README.md`
* `docker-compose.yml` - Docker Compose config file which is used to build a Docker
  images and run the topology (api and reverse proxy).


Dependencies
------------

### Project Dependencies

* [**RESTful API Server Example**](../../api/) 
* [**Docker**](https://www.docker.com/) 1.11+
* [**Docker Compose**](https://docs.docker.com/compose/overview/) 1.8+


Installation
------------

### From sources

#### Clone the Project

```bash
$ git clone https://github.com/frol/flask-restplus-server-example.git
```

#### Run the application topology

It is very easy to start exploring the example using Docker Compose:

```bash
$ cd deploy/stack2
$ docker-compose build
$ docker-compose up
```

To tear it down:

```bash
$ docker-compose kill
$ docker-compose rm -fv
```

Quickstart
----------

Open reverse proxy home page
[http://127.0.0.1/](http://127.0.0.1/) or http://127.0.0.1:CUSTOM_PORT if you changed it

Open online interactive API documentation:
[http://127.0.0.1/api/v1/](http://127.0.0.1/api/v1/)

Autogenerated swagger config is always available from
[http://127.0.0.1:5000/api/v1/swagger.json](http://127.0.0.1:5000/api/v1/swagger.json)

This stack is based on the [stack1](../stack1/), so you may find some extra information there.

Read the [RESTful API Server Example](../../api/) doc for more information about the API itself.

Enhancement
----------

**Use the uWSGI way to log:** Append `uwsgi` command with `--logger file:logfile=/tmp/flask-stack2.log,maxsize=104857600` (Log to /tmp/flask-stack2.log.{timestamp}, Use timestamp if file size over 100MB) in `docker-compose.yml`.
